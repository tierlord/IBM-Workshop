var request = require('request');

/* simple-post

var sp = require('simple-post')('https://username:password@abc.com')

sp({data:'abc123'})

*/

module.exports = function(url, noLog, noTime) {
    function post(data, cb) {
        if (typeof data == 'object' && !noTime)
            data.time = Date.now();
        request({
            url:url,
            method:'POST',
            json:data
        }, function(err, resp, body) {
            if (err && !noLog)
                console.error('simple-post error', err);
            if (cb)
                cb(err, resp, body);
        });
    }
    return post;
}
